<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>tinySQL Function Reference</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="toastContainer" style="position:fixed;top:1rem;right:1rem;z-index:2000;"></div>
  <header>
    <div class="header-content">
      <div>
        <h1 data-i18n="title">tinySQL Function Reference</h1>
        <div class="subtitle" data-i18n="subtitle">Interactive reference and examples for tinySQL functions</div>
      </div>
      <div style="display:flex;gap:0.5rem;align-items:center">
        <select id="langSelect" aria-label="Language selector">
          <option value="de">DE</option>
          <option value="en">EN</option>
        </select>
        <a id="backDemo" href="index.html" style="color: white; text-decoration: none; border: 1px solid rgba(255,255,255,0.12); padding: 0.5rem 0.75rem; border-radius: 6px;" data-i18n="back">â¬… ZurÃ¼ck zur Demo</a>
      </div>
    </div>
    <div class="top-toolbar" style="position:sticky;top:0;z-index:1500;background:var(--header-bg,#0b1220);padding:0.5rem 1rem;border-bottom:1px solid rgba(255,255,255,0.04);display:flex;gap:0.5rem;align-items:center;">
      <button id="btnBegin">BEGIN</button>
      <button id="btnCommit">COMMIT</button>
      <button id="btnRollback">ROLLBACK</button>
      <button id="btnCreateView">Create View</button>
      <button id="btnListViews">List Views</button>
      <button id="btnShowMeta">Show Meta</button>
    </div>
  </header>

  <div class="container">
    <nav>
      <div class="search-box" style="display: block;">
        <input type="text" class="search-input" id="searchInput" placeholder="Funktion suchen...">
      <div class="tool-row" style="display:flex;gap:1rem;margin-bottom:1rem;align-items:center;">
        <div style="display:flex;gap:0.5rem;align-items:center;">
          <button id="btnListTables">List Tables</button>
          <input id="tblNameInput" placeholder="table name" style="padding:0.5rem;border:1px solid var(--border);border-radius:4px;">
          <button id="btnDescribeTable">Describe Table</button>
        </div>
        <div style="margin-left:1rem;display:flex;gap:0.5rem;align-items:center;">
          <input id="explainSql" placeholder="SELECT ..." style="padding:0.5rem;border:1px solid var(--border);border-radius:4px;width:420px;">
          <button id="btnExplain">Explain</button>
        </div>
        
      </div>

      </div>
      <div class="nav-section">
        <div class="nav-title">Kategorien</div>
        <a href="#datetime" class="nav-link">â° Date & Time</a>
        <a href="#string" class="nav-link">ğŸ“ String Functions</a>
        <a href="#numeric" class="nav-link">ğŸ”¢ Numeric Functions</a>
        <a href="#array" class="nav-link">ğŸ“‹ Array Functions</a>
        <a href="#aggregate" class="nav-link">ğŸ“Š Aggregate Functions</a>
        <a href="#window" class="nav-link">ğŸªŸ Window Functions</a>
        <a href="#conditional" class="nav-link">ğŸ”€ Conditional</a>
        <a href="#crypto" class="nav-link">ğŸ” Cryptographic</a>
        <a href="#type" class="nav-link">ğŸ”„ Type Functions</a>
        <a href="#utility" class="nav-link">ğŸ› ï¸ Utility</a>
      </div>
    </nav>

    <main id="content">
      <!-- Content will be generated by JavaScript -->
    </main>

    <aside class="right-panel" style="display: none;">
      <div class="function-card">
        <h3 data-i18n="schemaTitle">Schema Browser</h3>
        <div style="display:flex;gap:0.5rem;margin-bottom:0.5rem;align-items:center;">
          <button id="btnRefreshSchema">Refresh</button>
          <button id="btnLoadDemo">Load Demo Tables</button>
        </div>
        
        <div id="schemaList" style="max-height:60vh;overflow:auto;"></div>
      </div>
    </aside>
  </div>

  <!-- Try It Yourself Modal -->
  <div class="modal" id="tryModal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-title">Try It Yourself - tinySQL WASM</div>
            <div style="display:flex;gap:0.5rem;align-items:center;">
              <button class="copy-button" id="copyModal" title="Copy SQL">ğŸ“‹</button>
              <button class="close-button" id="closeModal">&times;</button>
            </div>
      </div>
      <div class="modal-body">
        <div class="editor-container">
          <div class="editor-label">SQL Query:</div>
          <textarea id="modalEditor"></textarea>
        </div>
        <div class="editor-actions">
          <button class="btn btn-primary" id="executeQuery">â–¶ Execute Query</button>
          <button class="btn btn-success" id="executeExec">âœ“ Execute Statement</button>
        </div>
        <div id="modalResult">Ergebnis wird hier angezeigt...</div>
      </div>
    </div>
  </div>

  <script src="wasm_exec.js"></script>
  <script src="function_data.js"></script>
  <script src="app.js"></script>
</body>
</html>
